"use strict";(self.webpackChunkbenchmarking=self.webpackChunkbenchmarking||[]).push([[878],{7878:(J,d,n)=>{n.r(d),n.d(d,{RetryTestComponent:()=>N});var h=n(6895),$=n(4482),b=n(5403),v=n(4671),T=n(5963),g=n(8421),c=n(7579),C=n(7445),Z=n(4004),k=n(8505),D=n(2722),R=n(1323),x=n(1028),e=n(4650);const U=function(s){return{"border-color":s}};let N=(()=>{class s{constructor(){this.codeSnippet="\n  combineLatestStream$ = combineLatest([\n    this.makeStream(1),\n    this.makeStream(2),\n    this.makeStream(3),\n    this.triggerStream$\n  ])\n  ",this.emitStream$=new c.x,this.runStream$=new c.x,this.makeErrors=!1,this.startTime=Date.now(),this.endTime=Number.NEGATIVE_INFINITY,this.destroy$=new c.x,this.makeStream=r=>(0,C.F)(1e3*r).pipe((0,Z.U)(t=>{if(this.makeErrors)throw new Error("making errors");return t}),(0,k.b)(()=>this.runStream$.next({label:`${r}`,time:Date.now()})),function E(s=1/0){let o;o=s&&"object"==typeof s?s:{count:s};const{count:r=1/0,delay:t,resetOnSuccess:i=!1}=o;return r<=0?v.y:(0,$.e)((A,m)=>{let a,u=0;const p=()=>{let y=!1;a=A.subscribe((0,b.x)(m,l=>{i&&(u=0),m.next(l)},void 0,l=>{if(u++<r){const S=()=>{a?(a.unsubscribe(),a=null,p()):y=!0};if(null!=t){const I="number"==typeof t?(0,T.H)(t):(0,g.Xf)(t(l,u)),f=(0,b.x)(m,()=>{f.unsubscribe(),S()},()=>{m.complete()});I.subscribe(f)}else S()}else m.error(l)})),y&&(a.unsubscribe(),a=null,p())};p()})}({count:5,delay:(t,i)=>(this.runStream$.next({label:"E",time:Date.now()}),(0,T.H)(Math.min(6e4,2^1e3*i)))})),this.stream$=this.makeStream(1)}ngOnInit(){}doSubscribe(){this.startTime=Date.now(),this.stream$.pipe((0,D.R)(this.destroy$)).subscribe({next:r=>{this.emitStream$.next({label:`${r}`,time:Date.now()})},error:r=>{this.emitStream$.next({label:"E",time:Date.now()}),this.emitStream$?.complete(),this.runStream$?.complete()},complete:()=>{this.emitStream$?.complete(),this.runStream$?.complete()}})}doComplete(){this.destroy$.next(),this.endTime=Date.now()}doError(){this.makeErrors=!this.makeErrors}ngOnDestroy(){this.doComplete()}}return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-catch-error-test"]],standalone:!0,features:[e.jDz],decls:14,vars:10,consts:[[3,"codeSnippet"],[3,"click"],[3,"ngStyle","click"],[1,"observable_area"],["title","Emits",3,"endTime","startTime","stream$"],["title","Runs",3,"endTime","startTime","stream$"]],template:function(r,t){1&r&&(e._UZ(0,"app-code-snippet",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return t.doSubscribe()}),e._uU(2,"Do subscribe"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return t.doError()}),e._uU(4,"Toggle Errors"),e.qZA(),e.TgZ(5,"button",1),e.NdJ("click",function(){return t.doComplete()}),e._uU(6,"Do Complete"),e.qZA(),e.TgZ(7,"div",3)(8,"p"),e._uU(9,"retry(x) will retry the source x times before closing the subscription"),e.qZA(),e.TgZ(10,"p"),e._uU(11,"retry(count: x, delay: (err, count) => ...) can be used to fine tune a delay and maximum retry"),e.qZA(),e._UZ(12,"app-observable-graph",4)(13,"app-observable-graph",5),e.qZA()),2&r&&(e.Q6J("codeSnippet",t.codeSnippet),e.xp6(3),e.Q6J("ngStyle",e.VKq(8,U,t.makeErrors?"red":"green")),e.xp6(9),e.Q6J("endTime",t.endTime)("startTime",t.startTime)("stream$",t.emitStream$),e.xp6(1),e.Q6J("endTime",t.endTime)("startTime",t.startTime)("stream$",t.runStream$))},dependencies:[x.N,R.H,h.ez,h.PC],styles:[".observable_area[_ngcontent-%COMP%]{max-width:400px}"]}),s})()}}]);