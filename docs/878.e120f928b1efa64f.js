"use strict";(self.webpackChunkbenchmarking=self.webpackChunkbenchmarking||[]).push([[878],{7878:(U,h,e)=>{e.r(h),e.d(h,{RetryTestComponent:()=>F});var v=e(6895),$=e(7579),E=e(7445),T=e(4004),g=e(8505),x=e(4482),f=e(5403),C=e(4671),y=e(5963),k=e(8421),D=e(4654),r=e(4650);let F=(()=>{class n{constructor(){this.codeSnippet="\n  makeStream = (i: number) => interval(i * 1000).pipe(\n    map((data) => {\n      if (this.makeErrors) {\n        throw new Error('making errors');\n      }\n      return data;\n    }),\n    tap(() => this.runStream$.next(\n      {\n        label: `${i}`,\n        time: Date.now()\n      }\n    )),\n    retry({\n      count: 5,\n      delay: (_, count) => {\n        this.runStream$.next(\n          {\n            label: `E`,\n            time: Date.now()\n          }\n        )\n        return timer(Math.min(60000, 2 ^ count * 1000))\n      }\n    }));\n\n  testStream$ = this.makeStream(1)\n  ",this.makeErrors=!1,this.runStream$=new $.x,this.makeStream=a=>(0,E.F)(1e3*a).pipe((0,T.U)(t=>{if(this.makeErrors)throw new Error("making errors");return t}),(0,g.b)(()=>this.runStream$.next({label:`${a}`,time:Date.now()})),function R(n=1/0){let s;s=n&&"object"==typeof n?n:{count:n};const{count:a=1/0,delay:t,resetOnSuccess:i=!1}=s;return a<=0?C.y:(0,x.e)((u,m)=>{let o,c=0;const p=()=>{let S=!1;o=u.subscribe((0,f.x)(m,l=>{i&&(c=0),m.next(l)},void 0,l=>{if(c++<a){const d=()=>{o?(o.unsubscribe(),o=null,p()):S=!0};if(null!=t){const M="number"==typeof t?(0,y.H)(t):(0,k.Xf)(t(l,c)),b=(0,f.x)(m,()=>{b.unsubscribe(),d()},()=>{m.complete()});M.subscribe(b)}else d()}else m.error(l)})),S&&(o.unsubscribe(),o=null,p())};p()})}({count:5,delay:(t,i)=>(this.runStream$.next({label:"E",time:Date.now()}),(0,y.H)(Math.min(6e4,2^1e3*i)))})),this.testStream$=this.makeStream(1)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-catch-error-test"]],standalone:!0,features:[r.jDz],decls:5,vars:4,consts:[[3,"codeSnippet","runStream$","showMakeErrors","testStream$","makeErrorsChange"]],template:function(a,t){1&a&&(r.TgZ(0,"app-observable-area",0),r.NdJ("makeErrorsChange",function(u){return t.makeErrors=u}),r.TgZ(1,"p"),r._uU(2,"retry(x) will retry the source x times before closing the subscription"),r.qZA(),r.TgZ(3,"p"),r._uU(4,"retry(count: x, delay: (err, count) => ...) can be used to fine tune a delay and maximum retry"),r.qZA()()),2&a&&r.Q6J("codeSnippet",t.codeSnippet)("runStream$",t.runStream$)("showMakeErrors",!0)("testStream$",t.testStream$)},dependencies:[v.ez,D.U],styles:[".observable_area[_ngcontent-%COMP%]{max-width:400px}"]}),n})()}}]);